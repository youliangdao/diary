{"pageProps":{"issue":{"body":"","bodyHTML":"","active_lock_reason":null,"assignee":null,"assignees":[],"author_association":"OWNER","closed_at":null,"comments":0,"comments_url":"https://api.github.com/repos/youliangdao/diary/issues/29/comments","created_at":"2022-09-26T00:54:39Z","events_url":"https://api.github.com/repos/youliangdao/diary/issues/29/events","html_url":"https://github.com/youliangdao/diary/issues/29","id":1385238678,"labels":[],"labels_url":"https://api.github.com/repos/youliangdao/diary/issues/29/labels{/name}","locked":false,"milestone":null,"node_id":"I_kwDOH2O6185SkRCW","number":29,"performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/youliangdao/diary/issues/29/reactions"},"repository_url":"https://api.github.com/repos/youliangdao/diary","state":"open","state_reason":null,"timeline_url":"https://api.github.com/repos/youliangdao/diary/issues/29/timeline","title":"2022-09-26","updated_at":"2022-09-26T00:54:39Z","url":"https://api.github.com/repos/youliangdao/diary/issues/29","user":{"avatar_url":"https://avatars.githubusercontent.com/u/72332502?v=4","events_url":"https://api.github.com/users/youliangdao/events{/privacy}","followers_url":"https://api.github.com/users/youliangdao/followers","following_url":"https://api.github.com/users/youliangdao/following{/other_user}","gists_url":"https://api.github.com/users/youliangdao/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/youliangdao","id":72332502,"login":"youliangdao","node_id":"MDQ6VXNlcjcyMzMyNTAy","organizations_url":"https://api.github.com/users/youliangdao/orgs","received_events_url":"https://api.github.com/users/youliangdao/received_events","repos_url":"https://api.github.com/users/youliangdao/repos","site_admin":false,"starred_url":"https://api.github.com/users/youliangdao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/youliangdao/subscriptions","type":"User","url":"https://api.github.com/users/youliangdao"}},"issueComments":[{"body":"## モジュールコンテキストとuse strict\n- そもそもモジュールを利用する際はグローバルコンテキストの代わりにモジュールコンテキスト、スクリプトスコープの代わりにモジュールスコープが採用されている\n- モジュールコンテキスト内ではthisが使用できず、トップレベルやトップレベルで呼ばれている関数コンテキスト内でthisを呼ぶとundefinedとなる\n- ただオブジェクト経由で呼ぶとこれまで通り、オブジェクトの参照先を示す\n- そしてモジュールでは自動的にStrictモードが有効になっており、これにより主にクラス内での挙動が変化している\n  - メソッド内のthisはundefined\n  - コンストラクター内のthisもundefined\n  - これはクラスコンポーネントを扱う際に、面倒臭い問題を引き起こす。\n","bodyHTML":"<h2>モジュールコンテキストとuse strict</h2>\n<ul>\n<li>そもそもモジュールを利用する際はグローバルコンテキストの代わりにモジュールコンテキスト、スクリプトスコープの代わりにモジュールスコープが採用されている</li>\n<li>モジュールコンテキスト内ではthisが使用できず、トップレベルやトップレベルで呼ばれている関数コンテキスト内でthisを呼ぶとundefinedとなる</li>\n<li>ただオブジェクト経由で呼ぶとこれまで通り、オブジェクトの参照先を示す</li>\n<li>そしてモジュールでは自動的にStrictモードが有効になっており、これにより主にクラス内での挙動が変化している\n<ul>\n<li>メソッド内のthisはundefined</li>\n<li>コンストラクター内のthisもundefined</li>\n<li>これはクラスコンポーネントを扱う際に、面倒臭い問題を引き起こす。</li>\n</ul>\n</li>\n</ul>","author_association":"OWNER","created_at":"2022-09-26T01:03:41Z","html_url":"https://github.com/youliangdao/diary/issues/29#issuecomment-1257339107","id":1257339107,"issue_url":"https://api.github.com/repos/youliangdao/diary/issues/29","node_id":"IC_kwDOH2O6185K8Xjj","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/youliangdao/diary/issues/comments/1257339107/reactions"},"updated_at":"2022-09-26T01:03:41Z","url":"https://api.github.com/repos/youliangdao/diary/issues/comments/1257339107","user":{"avatar_url":"https://avatars.githubusercontent.com/u/72332502?v=4","events_url":"https://api.github.com/users/youliangdao/events{/privacy}","followers_url":"https://api.github.com/users/youliangdao/followers","following_url":"https://api.github.com/users/youliangdao/following{/other_user}","gists_url":"https://api.github.com/users/youliangdao/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/youliangdao","id":72332502,"login":"youliangdao","node_id":"MDQ6VXNlcjcyMzMyNTAy","organizations_url":"https://api.github.com/users/youliangdao/orgs","received_events_url":"https://api.github.com/users/youliangdao/received_events","repos_url":"https://api.github.com/users/youliangdao/repos","site_admin":false,"starred_url":"https://api.github.com/users/youliangdao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/youliangdao/subscriptions","type":"User","url":"https://api.github.com/users/youliangdao"}},{"body":"- Reactのクラスコンポーネントの場合を考えてみる\n- 以下のようなコードがあった場合\n```\nclass SwitchButton extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      switchOn: true,\n      label: 'On',\n    }\n  }\n\n  changeSwitch() {\n    console.log(this)\n  }\n\n  render() {\n    const { label } = this.state;\n    return <button onClick={this.changeSwitch}>{label}</button>\n  }\n}\n```\n- クリック時にはthis.changeSwitchが呼ばれるが、これはオブジェクト経由で呼ばれるのではなく、「単独の関数」として呼ばれる\n  - そのため、クラス内でstrictモードが有効になっているからthisの参照先はundefinedになってしまう。\n  - strictモードは不要なwindowオブジェクトの露出を避けるためこういう仕様になっている。\n  - そのため、クラスコンポーネントでclickハンドラーでstate管理を行う場合はbindでthisを束縛する必要がある！！\n","bodyHTML":"<ul>\n<li>Reactのクラスコンポーネントの場合を考えてみる</li>\n<li>以下のようなコードがあった場合</li>\n</ul>\n<pre><code>class SwitchButton extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      switchOn: true,\n      label: 'On',\n    }\n  }\n\n  changeSwitch() {\n    console.log(this)\n  }\n\n  render() {\n    const { label } = this.state;\n    return &#x3C;button onClick={this.changeSwitch}>{label}&#x3C;/button>\n  }\n}\n</code></pre>\n<ul>\n<li>クリック時にはthis.changeSwitchが呼ばれるが、これはオブジェクト経由で呼ばれるのではなく、「単独の関数」として呼ばれる\n<ul>\n<li>そのため、クラス内でstrictモードが有効になっているからthisの参照先はundefinedになってしまう。</li>\n<li>strictモードは不要なwindowオブジェクトの露出を避けるためこういう仕様になっている。</li>\n<li>そのため、クラスコンポーネントでclickハンドラーでstate管理を行う場合はbindでthisを束縛する必要がある！！</li>\n</ul>\n</li>\n</ul>","author_association":"OWNER","created_at":"2022-09-26T01:20:51Z","html_url":"https://github.com/youliangdao/diary/issues/29#issuecomment-1257350162","id":1257350162,"issue_url":"https://api.github.com/repos/youliangdao/diary/issues/29","node_id":"IC_kwDOH2O6185K8aQS","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/youliangdao/diary/issues/comments/1257350162/reactions"},"updated_at":"2022-09-26T01:20:51Z","url":"https://api.github.com/repos/youliangdao/diary/issues/comments/1257350162","user":{"avatar_url":"https://avatars.githubusercontent.com/u/72332502?v=4","events_url":"https://api.github.com/users/youliangdao/events{/privacy}","followers_url":"https://api.github.com/users/youliangdao/followers","following_url":"https://api.github.com/users/youliangdao/following{/other_user}","gists_url":"https://api.github.com/users/youliangdao/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/youliangdao","id":72332502,"login":"youliangdao","node_id":"MDQ6VXNlcjcyMzMyNTAy","organizations_url":"https://api.github.com/users/youliangdao/orgs","received_events_url":"https://api.github.com/users/youliangdao/received_events","repos_url":"https://api.github.com/users/youliangdao/repos","site_admin":false,"starred_url":"https://api.github.com/users/youliangdao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/youliangdao/subscriptions","type":"User","url":"https://api.github.com/users/youliangdao"}}]},"__N_SSG":true}